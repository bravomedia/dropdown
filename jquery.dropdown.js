// Generated by CoffeeScript 1.6.3
(function(){var e;e=jQuery;e.fn.dropdown=function(t){var n,r;n=this;r=e.extend({action:"hover",hoverClass:"hover",activeClass:"active",animationTime:"fast",touchElement:"a",touchedClass:"touched",itemSelector:"li",dropdownSelector:"ul"},t);if(r.action==="click"){e(this).find(r.itemSelector).not("."+r.activeClass).find(r.dropdownSelector).slideUp(1,function(){if(r.activatedCallback)return r.activatedCallback(n)});e(this).find(r.itemSelector).on("click",">"+r.touchElement,function(){return e(this).siblings(r.dropdownSelector).slideToggle(r.animationTime,function(){if(r.activeCallback)return r.activeCallback(n)})})}else if(r.action==="hover"){r.itemSelector==="li"&&(r.itemSelector=">ul>li");e(this).find(r.itemSelector).find(r.dropdownSelector).slideUp(1,function(){if(r.activatedCallback)return r.activatedCallback(n)});e(this).find(r.itemSelector).hover(function(){clearTimeout(e.data(this,"timer"));e(r.dropdownSelector,this).stop(!0,!0).slideDown(r.animationTime,function(){if(r.activeCallback)return r.activeCallback(n)});return e(this).addClass(r.hoverClass).children(r.touchElement).removeClass(r.touchedClass)},function(){return e.data(this,"timer",setTimeout(e.proxy(function(){e(r.dropdownSelector,this).stop(!0,!0).slideUp(r.animationTime,function(){if(r.activeCallback)return r.activeCallback(n)});return e(this).removeClass(r.hoverClass).children(r.touchElement).addClass(r.touchedClass)},this),r.animationTime))})}e("*").bind("tapone",function(t){var n;n=e("."+r.hoverClass);if(n.length)if(e(this).parents().hasClass(r.hoverClass))t.stopPropagation();else{t.preventDefault();t.stopPropagation()}if(n.has(t.target).length===0)return n.mouseleave()});e(r.touchElement).bind("tapone",function(t){if(e(this).hasClass(r.touchedClass)&&e(this).parent("."+r.hoverClass).length===0){t.preventDefault();return e(this).removeClass(r.touchedClass).parent().mouseenter()}});return this}}).call(this);